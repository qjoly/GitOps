<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-terminal-4.7.0">
     
     
    
    <link rel="canonical" href="https://qjoly.github.io/GitOps/"><link rel="icon" type="image/png" sizes="192x192" href="img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png" />


    
 
<title>Welcome aboard! - GitOps</title>


<link href="css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="css/normalize.css" rel="stylesheet">
<link href="css/terminal.css" rel="stylesheet">
<link href="css/theme.css" rel="stylesheet">
<link href="css/theme.tile_grid.css" rel="stylesheet">
<link href="css/theme.footer.css" rel="stylesheet">
<!-- default color palette -->
<link href="css/palettes/default.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



     
    
    

    
    <!-- search css support -->
<link href="css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = ".",
    shortcuts = "{}";
</script>
<script src="js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="js/bootstrap/bootstrap.min.js" defer></script>
<script src="js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="https://qjoly.github.io/GitOps/" class="no-style">GitOps</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="." class="menu-item active" property="item" typeof="WebPage">
                        <span property="name">Welcome aboard!</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="backup/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Backup</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="cloudflared/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Cloudflared</span>
                    </a>
                    <meta property="position" content="2">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="getting-started/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Getting Started</span>
                    </a>
                    <meta property="position" content="3">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="secret-management/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Secret Management</span>
                    </a>
                    <meta property="position" content="4">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="zfs/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">ZFS</span>
                    </a>
                    <meta property="position" content="5">
                </li>
                
                    
                    


<li property="itemListElement" typeof="ListItem">
    <a href="#" class="menu-item" data-toggle="modal" data-target="#mkdocs_search_modal" property="item" typeof="SearchAction">
        <i aria-hidden="true" class="fa fa-search"></i> <span property="name">Search</span>
    </a>
    <meta property="position" content="6">
</li>
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        <span class="

    terminal-mkdocs-side-nav-item--active">Welcome aboard!</span>
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="backup/">Backup</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="cloudflared/">Cloudflared</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="getting-started/">Getting Started</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="secret-management/">Secret Management</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="zfs/">ZFS</a>
        
    
    
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#welcome-aboard">Welcome aboard!</a></li>
        <li><a href="#what-the-heck-is-a-cloudlab">What the heck is a CloudLab?</a></li><li><a href="#which-technologies-are-used">Which technologies are used?</a></li>
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
<section id="mkdocs-terminal-content">
    <h1 id="welcome-aboard">Welcome aboard!</h1>
<p>This is a collection of notes and guides that I have written to help me remember how to do things. I hope you find them useful too. Keep in mind that everything here is a work in progress and that it's mostly for personal use, so it might not be the best way to do things, however, many choices are made with ease of use in mind.</p>
<p>First things first, let's explain what a CloudLab is.</p>
<h2 id="what-the-heck-is-a-cloudlab">What the heck is a CloudLab?</h2>
<p>In opposition to a HomeLab, a CloudLab a server rented from a cloud provider. It's a great way to experiment with new technologies without the need to buy hardware and deal with the noise and heat of the servers.</p>
<p>In my personal case, I have both a Homelab and a CloudLab. I use the CloudLab to test new technologies and the Homelab to host sensitive data and services (clusters <code>home</code> is the name of my Homelab cluster, <code>cortado</code> and <code>arabica</code> are CloudLab clusters).</p>
<p>I have 2 n100 servers at home, both are running Proxmox and are connected to a 1G switch as well as my NAS.s
<img alt="alt text" src="img/sweet-home-lab.png" /></p>
<p><em>Sorry cable management enthusiasts, I'm not there yet.</em></p>
<h2 id="which-technologies-are-used">Which technologies are used?</h2>
<p>Like many people in the k8s-at-home community, I use Kubernetes to manage my services and prioritize Helm charts to deploy them. But many services / applications doesn't have a Helm chart (or the one provided doesn't respect my requirements) so I chose <a href="https://github.com/RubxKube/common-charts/">to write my own templates</a> (If you start looking at my configuration, you will sometimes see <code>common-charts</code> instead of the official Helm chart).</p>
<p>To install and managed my Kubernetes cluster, I use <a href="https://talos.dev/">Talos</a>, a modern OS for Kubernetes. It's a great way to have a minimal OS that is easy to manage and secure. On top of that, I also have <a href="https://omni.siderolabs.com/tutorials/getting_started/">Omni</a> to manage my cluster. Omni allows me to manage many clusters from a single interface and provides features like gRPC Proxy (to access the Kubernetes API of all clusters, directly from Omni and by using a standard Kubeconfig, <a href="https://github.com/qjoly/GitOps/blob/750b83bf148b64d17f8af15213b78c26335a41f8/cortado/kubeconfig">e.g. here</a>), RBAC, Deployments, and more.</p>
<p>All Omni templates are stored in this repository (e.g. <a href="https://github.com/qjoly/GitOps/blob/750b83bf148b64d17f8af15213b78c26335a41f8/cortado/template.yaml">here</a>) and are applied with <code>omnictl</code>.</p>
<p>Here are just a few of the technologies and applications I use :
- <a href="https://www.siderolabs.com/platform/saas-for-kubernetes/"><strong>Omni</strong> (Self-hosted)</a> : Manage all nodes between clusters and regions.
- <a href="https://cilium.io/">Cilium</a> as CNI and LB (ARP mode)
- <a href="https://argoproj.github.io/argo-cd/">ArgoCD</a> to manage the GitOps workflow
- <a href="https://kubernetes.github.io/ingress-nginx/">Nginx Ingress Controller</a> for Ingress management (and <a href="https://istio.io/">Istio</a> deployed on some clusters)
- <a href="https://cert-manager.io/">Cert Manager</a> for TLS certificates.
- <a href="https://longhorn.io/">Longhorn</a> for storage based on nodes disks (<strong>Only on the <code>home</code> cluster</strong>).
- <a href="https://external-secrets.io/latest/">External Secrets</a> to fetch secrets from a remote store.
- <a href="https://www.vaultproject.io/">Vault</a> as a secret store to store secrets.
- <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/">Cloudflare Tunnels</a> to expose services to the internet (<strong>Only on the <code>home</code> cluster</strong>).
- <a href="https://openzfs.github.io/openzfs-docs/">ZFS</a> + <a href="https://github.com/rancher/local-path-provisioner">Local-Path-Provisioner</a> to create persistent volumes on the mounted ZFS filesystem (<strong>Only on CloudLab cluster</strong>).
- <a href="https://github.com/backube/volsync">Volsync</a> to create backup and send backup (using restic) to a minio server (<strong>Only on CloudLab cluster</strong>).</p>
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>